<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Water Use Visualization</title>

<style>
:root{
  --bg:#f5f7f6;
  --card:#ffffff;
  --muted:#6b7280;
  --esrt-green:#00594c;
  --esrt-blue:#007fa3;
  --water:#007fa3;
}

body{
  margin:0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  background:var(--bg);
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  padding:40px;
}

.module{
  width:980px;
  max-width:100%;
  background:#fff;
  border-radius:14px;
  box-shadow:0 8px 30px rgba(0,0,0,0.05);
  padding:40px;
  display:flex;
  gap:60px;
  align-items:center;
  flex-wrap:wrap;
}

.glass-card{
  padding:10px;
}

.info{
  flex:1;
  min-width:260px;
  display:flex;
  flex-direction:column;
  gap:16px;
}

.title{
  font-size:20px;
  font-weight:600;
  color:var(--esrt-green);
}

.subtitle{
  font-size:14px;
  color:var(--muted);
}

.stats-row{
  display:flex;
  gap:24px;
  flex-wrap:wrap;
}

.stat{
  min-width:200px;
}

.big{
  font-size:32px;
  font-weight:700;
  color:var(--esrt-green);
}

.small{
  font-size:14px;
  color:var(--muted);
}

.meter{
  height:10px;
  background:#e6f2f4;
  border-radius:6px;
  overflow:hidden;
  margin-top:8px;
}

.meter-fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--esrt-green),var(--esrt-blue));
  transition:width 1.4s cubic-bezier(.2,.9,.3,1);
}

@media (max-width:820px){
  .module{ flex-direction:column; }
}
</style>
</head>

<body>

<div class="module">

  <!-- GLASS -->
  <div class="glass-card">
    <svg viewBox="0 0 200 360" width="200" height="360">

      <defs>

        <!-- Minimal architectural straight glass -->
        <path id="glassShape"
          d="M60 20
             L140 20
             L160 320
             Q160 340 100 345
             Q40 340 40 320
             Z"/>

        <clipPath id="clipGlass">
          <use href="#glassShape"/>
        </clipPath>

        <linearGradient id="waterGrad" x1="0" x2="0" y1="0" y2="1">
          <stop offset="0%" stop-color="#0093b5"/>
          <stop offset="100%" stop-color="#00594c"/>
        </linearGradient>

        <!-- Wide wave for seamless looping -->
        <path id="wavePath"
          d="M0 30
             Q40 10 80 30
             T160 30
             T240 30
             V80 H0 Z"/>

      </defs>

      <!-- Glass outline -->
      <use href="#glassShape"
           fill="rgba(255,255,255,0.25)"
           stroke="#cfd8dc"
           stroke-width="3"/>

      <!-- Subtle highlight -->
      <path d="M70 40 L85 320"
            stroke="rgba(255,255,255,0.4)"
            stroke-width="6"
            opacity="0.4"/>

      <!-- WATER -->
      <g clip-path="url(#clipGlass)">

        <rect id="waterRect"
              x="0"
              y="320"
              width="200"
              height="0"
              fill="url(#waterGrad)"
              opacity="0.95"/>

        <g id="waveGroup">

          <!-- Wave 1 -->
          <use href="#wavePath"
               fill="#007fa3"
               opacity="0.6">
            <animateTransform
              attributeName="transform"
              type="translate"
              from="0 0"
              to="-160 0"
              dur="4s"
              repeatCount="indefinite"/>
          </use>

          <!-- Wave 2 -->
          <use href="#wavePath"
               fill="#00594c"
               opacity="0.35"
               x="160">
            <animateTransform
              attributeName="transform"
              type="translate"
              from="0 0"
              to="-160 0"
              dur="6s"
              repeatCount="indefinite"/>
          </use>

        </g>
      </g>

    </svg>

    <div style="margin-top:14px;text-align:center">
      <div id="glassPercent"
           style="font-size:20px;font-weight:700;color:var(--esrt-green)">
        -6.15%
      </div>
      <div style="font-size:14px;color:var(--muted)">
        decrease vs 2023
      </div>
    </div>
  </div>

  <!-- INFO -->
  <div class="info">
    <div>
      <div class="title">2024 NYC Commercial Office Water Use</div>
      <div class="subtitle">
        Visualization of change and intensity for 2024
      </div>
    </div>

    <div class="stats-row">
      <div class="stat">
        <div class="big">
          <span id="percentValue">0.00</span>%
        </div>
        <div class="small">
          Decrease in water consumption compared to 2023
        </div>
      </div>

      <div class="stat">
        <div class="big">
          <span id="intensityValue">0.000</span> kgal/ftÂ²
        </div>
        <div class="small">
          2024 water use intensity
        </div>
        <div class="meter">
          <div id="meterFill" class="meter-fill"></div>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
const percentDecrease = 6.15;
const intensityVal = 0.153;

const baselineFill = 0.5;
const finalFill = baselineFill * (1 - percentDecrease/100);

const waterRect = document.getElementById('waterRect');
const meterFill = document.getElementById('meterFill');

const INNER_TOP = 20;
const INNER_BOTTOM = 320;
const INNER_HEIGHT = INNER_BOTTOM - INNER_TOP;

function easeOut(t){ return 1 - Math.pow(1-t,3); }

function setWater(level){
  const h = INNER_HEIGHT * level;
  const y = INNER_BOTTOM - h;
  waterRect.setAttribute('y', y);
  waterRect.setAttribute('height', h);
  document.getElementById('waveGroup')
    .setAttribute('transform', `translate(0, ${y-30})`);
}

function animate(from,to,duration,cb){
  const start=performance.now();
  function step(now){
    const t=Math.min((now-start)/duration,1);
    cb(from+(to-from)*easeOut(t));
    if(t<1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

function animateNumber(id,end,dec){
  const el=document.getElementById(id);
  const start=performance.now();
  function step(now){
    const t=Math.min((now-start)/1400,1);
    el.textContent=(end*easeOut(t)).toFixed(dec);
    if(t<1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

function run(){
  setWater(0);

  animate(0,baselineFill,1000,setWater);
  setTimeout(()=>animate(baselineFill,finalFill,800,setWater),1200);

  animateNumber("percentValue",percentDecrease,2);
  animateNumber("intensityValue",intensityVal,3);

  meterFill.style.width=(intensityVal/0.6*100)+"%";
}

setTimeout(run,200);
</script>

</body>
</html>
